<!--
  ~ SPDX-FileCopyrightText: 2021 Helmholtz-Zentrum für Infektionsforschung GmbH (HZI) <PiaPost@helmholtz-hzi.de>
  ~
  ~ SPDX-License-Identifier: AGPL-3.0-or-later
  -->

<ion-item *ngIf="label" class="pia-questionnaire-question" lines="none">
  <ion-label class="ion-text-wrap" position="stacked">{{ label }}</ion-label>
</ion-item>
<ion-item
  *ngIf="label"
  class="pia-questionnaire-question"
  lines="none"
  id="open-modal"
  data-unit="thumbnail-container"
>
  <ion-thumbnail *ngIf="imageName" slot="start" data-unit="thumbnail">
    <img [src]="control.value?.file" [alt]="label" data-unit="image" />
  </ion-thumbnail>
  <ion-label>
    <p class="ion-text-wrap" data-unit="image-name">
      {{ imageName || 'QUESTIONNAIRE_QUESTIONS.NO_IMAGE_UPLOAD' | translate }}
    </p>
  </ion-label>
</ion-item>
<ion-modal trigger="open-modal">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-button (click)="cancel()" data-unit="close-thumbnail"
            >Zurück</ion-button
          >
        </ion-buttons>
        <ion-title>Fotoupload</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <ion-item>
        <ion-img [src]="control.value?.file" [alt]="label"></ion-img>
      </ion-item>
    </ion-content>
  </ng-template>
</ion-modal>
<ion-button
  type="button"
  [disabled]="disabled"
  (click)="onOpenCamera()"
  data-unit="on-open-camera"
>
  <ion-icon slot="icon-only" name="camera"></ion-icon>
</ion-button>
<ion-button
  type="button"
  [disabled]="disabled"
  (click)="onOpenChooser()"
  data-unit="on-open-chooser"
>
  <ion-icon slot="icon-only" name="folder"></ion-icon>
</ion-button>
<ion-button
  *ngIf="imageName"
  type="button"
  [disabled]="disabled"
  (click)="onDeleteImage()"
  data-unit="delete-picture"
  ><ion-icon slot="icon-only" name="trash"></ion-icon>
</ion-button>
